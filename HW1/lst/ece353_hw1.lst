


ARM Macro Assembler    Page 1 


    1 00000000         ; Filename:     ece353_hw1
    2 00000000         ; Author:       Shyamal Anadkat 
    3 00000000         ; Description:  hw1.s
    4 00000000         
    5 00000000                 export           hw1
    6 00000000                 export           WS2812B_LEDS
    7 00000000                 export           UPDATE_LEDS
    8 00000000                 import           init_leds
    9 00000000                 import           rotate_mod_leds
   10 00000000                 import           write_leds
   11 00000000         ;*******************************************************
                       ************************* 
   12 00000000         ; SRAM
   13 00000000         ;*******************************************************
                       ************************* 
   14 00000000                 AREA             SRAM, READWRITE
   15 00000000 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00    WS2812B_LEDS
                               SPACE            32          ; Space for 32-bit 
                                                            commands (24-bits u
                                                            sed) for 8 NeoPixel
                                                            s
   16 00000020 00 00 00 
              00       UPDATE_LEDS
                               SPACE            4
   17 00000024                 align
   18 00000024         
   19 00000024         
   20 00000024         ;*******************************************************
                       ************************* 
   21 00000024         ; Constant Variables (FLASH) Segment
   22 00000024         ;*******************************************************
                       ************************* 
   23 00000024                 AREA             FLASH, CODE, READONLY
   24 00000000                 align
   25 00000000         
   26 00000000         ;****************************************
   27 00000000         ; Rename registers for coad readability *
   28 00000000         ;****************************************
   29 00000000        0 
                       LEDS    RN               R0
   30 00000000        1 
                       UPDATE  RN               R1
   31 00000000        2 
                       GPIO    RN               R2
   32 00000000        4 
                       ZERO    RN               R4
   33 00000000         
   34 00000000         ;*******************************************************
                       ************************* 



ARM Macro Assembler    Page 2 


   35 00000000         ; function hw1
   36 00000000         ;  
   37 00000000         ; Description: main execution
   38 00000000         ;
   39 00000000         ; Parameters:  
   40 00000000         ; Returns: 
   41 00000000         ;*******************************************************
                       ************************* 
   42 00000000         hw1     PROC
   43 00000000         
   44 00000000         ;Setup argument to pass to init_leds
   45 00000000 4811            LDR              LEDS,   =(WS2812B_LEDS) ;load a
                                                            ddress of LEDS into
                                                             R0 
   46 00000002 4912            LDR              UPDATE, =(UPDATE_LEDS) ;load ad
                                                            dress of UPDATE_LED
                                                            S into R1
   47 00000004         
   48 00000004         ;call init_leds routine 
   49 00000004 B403            PUSH             {LEDS,UPDATE} ;EABI caller save
                                                            
   50 00000006 F7FF FFFE       BL               init_leds   ;call init_leds wit
                                                            h params R0, R1 
   51 0000000A BC03            POP              {LEDS, UPDATE} ;EABI caller res
                                                            tore
   52 0000000C         
   53 0000000C         infinite_loop
   54 0000000C         
   55 0000000C         ;Check if update_leds is non-zero to continue 
   56 0000000C 490F            LDR              UPDATE, =(UPDATE_LEDS) 
                                                            ;init UPDATE_LEDS
   57 0000000E 680D            LDR              R5, [UPDATE] ;get value of UPDA
                                                            TE_LEDS into R5
   58 00000010 F04F 0400       MOV              ZERO, #0    ;move 0 to R4 to co
                                                            mpare
   59 00000014 42AC            CMP              ZERO, R5    ;check if UPDATE_LE
                                                            DS value is zero 
   60 00000016 D0F9            BEQ              infinite_loop ;if so, branch to
                                                             start of infinite 
                                                            loop 
   61 00000018         
   62 00000018         ;Execute the assembly instruction “CPSID I” 
   63 00000018 B672            CPSID            I
   64 0000001A         
   65 0000001A         ;Set update-leds to 0 
   66 0000001A 600C            STR              ZERO, [UPDATE]
   67 0000001C         
   68 0000001C         ;Call rotate_mod_leds
   69 0000001C 480A            LDR              LEDS, =(WS2812B_LEDS) 
                                                            ;init first arg
   70 0000001E F04F 0108       MOV              UPDATE, #8  ;pass in second par
                                                            ameter 
   71 00000022 B403            PUSH             {R0,R1}     ;EABI store reg
   72 00000024 F7FF FFFE       BL               rotate_mod_leds ;call rotate_mo
                                                            d_leds
   73 00000028 BC03            POP              {R0,R1}     ;EABI restore reg
   74 0000002A         
   75 0000002A         ;Call write_leds 
   76 0000002A 4807            LDR              LEDS, =(WS2812B_LEDS) 



ARM Macro Assembler    Page 3 


                                                            ;init 1st arg
   77 0000002C F04F 0108       MOV              UPDATE, #8  ;init 2nd argument
   78 00000030 F247 32FC 
              F2C4 0200        MOV32            GPIO, #0x400073FC 
                                                            ;pass in 3rd arg 
   79 00000038 B40F            PUSH             {R0-R3}     ;EABI save reg
   80 0000003A F7FF FFFE       BL               write_leds  ;call writ_leds
   81 0000003E BC0F            POP              {R0-R3}     ;EABI restore reg
   82 00000040         
   83 00000040         ;Execute the assembly instruction “CPSIE I”. 
   84 00000040 B662            CPSIE            I
   85 00000042 E7E3            B                infinite_loop
   86 00000044 4770            BX               LR          ;return
   87 00000046                 ENDP
   88 00000046 00 00           align
   89 00000048         
   90 00000048                 END
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\obj\ece353_hw1.d -o.\obj\ece353_hw1.o -IC:\ECE353\HW1\RTE\_HW
1 -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.0.1\CMSIS\Include -IC:\Keil_v5\ARM\PACK\Kei
l\TM4C_DFP\1.1.0\Device\Include\TM4C123 --predefine="__EVAL SETA 1" --predefine
="__MICROLIB SETA 1" --predefine="__UVISION_VERSION SETA 522" --predefine="_RTE
_ SETA 1" --predefine="TM4C123GH6PM SETA 1" --list=.\lst\ece353_hw1.lst ece353_
hw1.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

SRAM 00000000

Symbol: SRAM
   Definitions
      At line 14 in file ece353_hw1.s
   Uses
      None
Comment: SRAM unused
UPDATE_LEDS 00000020

Symbol: UPDATE_LEDS
   Definitions
      At line 16 in file ece353_hw1.s
   Uses
      At line 7 in file ece353_hw1.s
      At line 46 in file ece353_hw1.s
      At line 56 in file ece353_hw1.s

WS2812B_LEDS 00000000

Symbol: WS2812B_LEDS
   Definitions
      At line 15 in file ece353_hw1.s
   Uses
      At line 6 in file ece353_hw1.s
      At line 45 in file ece353_hw1.s
      At line 69 in file ece353_hw1.s
      At line 76 in file ece353_hw1.s

3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

FLASH 00000000

Symbol: FLASH
   Definitions
      At line 23 in file ece353_hw1.s
   Uses
      None
Comment: FLASH unused
hw1 00000000

Symbol: hw1
   Definitions
      At line 42 in file ece353_hw1.s
   Uses
      At line 5 in file ece353_hw1.s
Comment: hw1 used once
infinite_loop 0000000C

Symbol: infinite_loop
   Definitions
      At line 53 in file ece353_hw1.s
   Uses
      At line 60 in file ece353_hw1.s
      At line 85 in file ece353_hw1.s

3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

init_leds 00000000

Symbol: init_leds
   Definitions
      At line 8 in file ece353_hw1.s
   Uses
      At line 50 in file ece353_hw1.s
Comment: init_leds used once
rotate_mod_leds 00000000

Symbol: rotate_mod_leds
   Definitions
      At line 9 in file ece353_hw1.s
   Uses
      At line 72 in file ece353_hw1.s
Comment: rotate_mod_leds used once
write_leds 00000000

Symbol: write_leds
   Definitions
      At line 10 in file ece353_hw1.s
   Uses
      At line 80 in file ece353_hw1.s
Comment: write_leds used once
3 symbols
351 symbols in table
